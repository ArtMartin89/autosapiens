(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{262:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(5155),r=t(8661),d=t.n(r),i=t(2115),n=t(2619),o=t.n(n);function l(){let[e,a]=(0,i.useState)([{id:"1",text:"Здравствуйте! Я помогу вам узнать больше об автоматизации бизнес-процессов. Задайте мне любой вопрос!",sender:"bot",timestamp:new Date}]),[t,r]=(0,i.useState)(""),[n,l]=(0,i.useState)(!1),[m]=(0,i.useState)(()=>{{let e=localStorage.getItem("chatSessionId");return e||(e="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("chatSessionId",e)),e}}),c=(0,i.useRef)(null),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;null==(e=c.current)||e.scrollIntoView({behavior:"smooth"})},[e]);let x=async()=>{if(!t.trim()||n)return;let e={id:Date.now().toString(),text:t,sender:"user",timestamp:new Date};a(a=>[...a,e]),r(""),l(!0);try{let e=await fetch("https://clecucuci.beget.app/webhook/c35da7d0-2308-4de6-8f3d-d6fd93b29b96",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,sessionId:m,chatId:m,userId:m,timestamp:new Date().toISOString()})});if(console.log("Response status:",e.status),console.log("Response headers:",e.headers),!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();console.log("Response from n8n:",s);let r="";r=s.reply?s.reply:"string"==typeof s?s:s.output?s.output:s.response?s.response:s.message?s.message:s.text?s.text:"Извините, не удалось получить ответ.";let d={id:(Date.now()+1).toString(),text:r||"Извините, произошла ошибка. Попробуйте еще раз.",sender:"bot",timestamp:new Date};a(e=>[...e,d])}catch(t){console.error("Error sending message:",t);let e={id:(Date.now()+1).toString(),text:"Извините, не удалось отправить сообщение. Проверьте подключение к интернету.",sender:"bot",timestamp:new Date};a(a=>[...a,e])}finally{var s;l(!1),null==(s=b.current)||s.focus()}};return(0,s.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #4D9CFD 0%, #6BB6FF 100%)",display:"flex",flexDirection:"column"},className:"jsx-67638e77ddb8a3ba",children:[(0,s.jsx)("header",{style:{backgroundColor:"var(--white)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:"1rem 0",position:"sticky",top:0,zIndex:100},className:"jsx-67638e77ddb8a3ba",children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-67638e77ddb8a3ba container",children:[(0,s.jsxs)(o(),{href:"/",style:{display:"flex",alignItems:"center",textDecoration:"none",color:"var(--text-primary)"},children:[(0,s.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:"var(--primary-base)",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"1rem",fontSize:"1.2rem",fontWeight:"bold",color:"var(--white)"},className:"jsx-67638e77ddb8a3ba",children:"AS"}),(0,s.jsx)("span",{style:{fontSize:"1.5rem",fontWeight:700},className:"jsx-67638e77ddb8a3ba",children:"AutoSapiens Chat"})]}),(0,s.jsxs)(o(),{href:"/",style:{textDecoration:"none",color:"var(--primary-base)",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"jsx-67638e77ddb8a3ba",children:(0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",className:"jsx-67638e77ddb8a3ba"})}),"На главную"]})]})}),(0,s.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"2rem 1rem",maxWidth:"900px"},className:"jsx-67638e77ddb8a3ba container",children:[(0,s.jsxs)("div",{style:{flex:1,backgroundColor:"var(--white)",borderRadius:"1rem 1rem 0 0",padding:"2rem",overflowY:"auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",marginBottom:0},className:"jsx-67638e77ddb8a3ba",children:[e.map(e=>(0,s.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.sender?"flex-end":"flex-start",marginBottom:"1rem"},className:"jsx-67638e77ddb8a3ba",children:(0,s.jsxs)("div",{style:{maxWidth:"70%",padding:"1rem 1.25rem",borderRadius:"user"===e.sender?"1.25rem 1.25rem 0.25rem 1.25rem":"1.25rem 1.25rem 1.25rem 0.25rem",backgroundColor:"user"===e.sender?"var(--primary-base)":"var(--light-gray)",color:"user"===e.sender?"var(--white)":"var(--text-primary)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",wordWrap:"break-word"},className:"jsx-67638e77ddb8a3ba",children:[(0,s.jsx)("div",{style:{fontSize:"1rem",lineHeight:1.5,marginBottom:"0.5rem"},className:"jsx-67638e77ddb8a3ba",children:e.text}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",opacity:.7,textAlign:"right"},className:"jsx-67638e77ddb8a3ba",children:e.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),n&&(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"1rem"},className:"jsx-67638e77ddb8a3ba",children:(0,s.jsxs)("div",{style:{padding:"1rem 1.25rem",borderRadius:"1.25rem 1.25rem 1.25rem 0.25rem",backgroundColor:"var(--light-gray)",display:"flex",gap:"0.5rem"},className:"jsx-67638e77ddb8a3ba",children:[(0,s.jsx)("div",{className:"jsx-67638e77ddb8a3ba typing-dot"}),(0,s.jsx)("div",{className:"jsx-67638e77ddb8a3ba typing-dot"}),(0,s.jsx)("div",{className:"jsx-67638e77ddb8a3ba typing-dot"})]})}),(0,s.jsx)("div",{ref:c,className:"jsx-67638e77ddb8a3ba"})]}),(0,s.jsx)("div",{style:{backgroundColor:"var(--white)",borderRadius:"0 0 1rem 1rem",padding:"1.5rem",boxShadow:"0 -2px 12px rgba(0, 0, 0, 0.05)"},className:"jsx-67638e77ddb8a3ba",children:(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end"},className:"jsx-67638e77ddb8a3ba",children:[(0,s.jsx)("input",{ref:b,type:"text",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},placeholder:"Введите ваше сообщение...",disabled:n,style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:"2px solid var(--border-default)",fontSize:"1rem",outline:"none",transition:"border-color 0.2s ease",backgroundColor:"var(--light-gray)"},onFocus:e=>{e.target.style.borderColor="var(--primary-base)"},onBlur:e=>{e.target.style.borderColor="var(--border-default)"},className:"jsx-67638e77ddb8a3ba"}),(0,s.jsxs)("button",{onClick:x,disabled:!t.trim()||n,style:{padding:"1rem 2rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:!t.trim()||n?.5:1,cursor:!t.trim()||n?"not-allowed":"pointer"},className:"jsx-67638e77ddb8a3ba btn-primary",children:[(0,s.jsx)("span",{className:"jsx-67638e77ddb8a3ba",children:"Отправить"}),(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"jsx-67638e77ddb8a3ba",children:(0,s.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",className:"jsx-67638e77ddb8a3ba"})})]})]})})]}),(0,s.jsx)(d(),{id:"67638e77ddb8a3ba",children:".typing-dot.jsx-67638e77ddb8a3ba{width:8px;height:8px;border-radius:50%;background-color:var(--primary-base);animation:typing 1.4s infinite ease-in-out}.typing-dot.jsx-67638e77ddb8a3ba:nth-child(2){animation-delay:.2s}.typing-dot.jsx-67638e77ddb8a3ba:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,100%{transform:translatey(0);opacity:.7}30%{transform:translatey(-10px);opacity:1}}@media(max-width:768px){.container.jsx-67638e77ddb8a3ba{padding:1rem .5rem!important}}"})]})}},1192:(e,a,t)=>{Promise.resolve().then(t.bind(t,262))}},e=>{e.O(0,[67,441,255,358],()=>e(e.s=1192)),_N_E=e.O()}]);