(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{835:(e,r,t)=>{Promise.resolve().then(t.bind(t,2653))},2653:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(5155),a=t(8661),i=t.n(a),n=t(2115),o=t(2619),l=t.n(o);let c=()=>"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,11));function d(){let[e,r]=(0,n.useState)([{id:c(),text:"Я помогу вам сформулировать хороший промпт для нейросети. Напишите свой запрос",sender:"bot",timestamp:new Date}]),[t,a]=(0,n.useState)(""),[o,d]=(0,n.useState)(!1),[m]=(0,n.useState)(()=>{{let e=localStorage.getItem("prompterSessionId");return e||(e="prompter_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("prompterSessionId",e)),e}}),f=(0,n.useRef)(null),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null==(e=f.current)||e.scrollIntoView({behavior:"smooth"})},[e]);let p=async()=>{if(!t.trim()||o)return;let e={id:c(),text:t,sender:"user",timestamp:new Date};r(r=>[...r,e]),a(""),d(!0);try{let e=await fetch("/api/prompter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,sessionId:m,chatId:m,userId:m,timestamp:new Date().toISOString()})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json(),a="";a=s.reply?s.reply:"string"==typeof s?s:s.output?s.output:s.response?s.response:s.message?s.message:s.text?s.text:"Извините, не удалось получить ответ.";let i={id:c(),text:a||"Извините, произошла ошибка. Попробуйте еще раз.",sender:"bot",timestamp:new Date};r(e=>[...e,i])}catch(t){console.error("Error sending prompter message:",t);let e={id:c(),text:"Извините, не удалось отправить сообщение. Проверьте подключение к интернету.",sender:"bot",timestamp:new Date};r(r=>[...r,e])}finally{var s;d(!1),null==(s=x.current)||s.focus()}};return(0,s.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #4D9CFD 0%, #6BB6FF 100%)",display:"flex",flexDirection:"column"},className:"jsx-83c21170c761ff26",children:[(0,s.jsx)("header",{style:{backgroundColor:"var(--white)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:"1rem 0",position:"sticky",top:0,zIndex:100},className:"jsx-83c21170c761ff26",children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-83c21170c761ff26 container",children:[(0,s.jsxs)(l(),{href:"/",style:{display:"flex",alignItems:"center",textDecoration:"none",color:"var(--text-primary)"},children:[(0,s.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:"var(--primary-base)",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"1rem",fontSize:"1.2rem",fontWeight:"bold",color:"var(--white)"},className:"jsx-83c21170c761ff26",children:"AS"}),(0,s.jsx)("span",{style:{fontSize:"1.5rem",fontWeight:700},className:"jsx-83c21170c761ff26",children:"AutoSapiens Propter"})]}),(0,s.jsxs)(l(),{href:"/",style:{textDecoration:"none",color:"var(--primary-base)",fontWeight:500,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"jsx-83c21170c761ff26",children:(0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",className:"jsx-83c21170c761ff26"})}),"На главную"]})]})}),(0,s.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"2rem 1rem",maxWidth:"900px"},className:"jsx-83c21170c761ff26 container",children:[(0,s.jsxs)("div",{style:{flex:1,backgroundColor:"var(--white)",borderRadius:"1rem 1rem 0 0",padding:"2rem",overflowY:"auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",marginBottom:0},className:"jsx-83c21170c761ff26",children:[e.map(e=>(0,s.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.sender?"flex-end":"flex-start",marginBottom:"1rem"},className:"jsx-83c21170c761ff26",children:(0,s.jsxs)("div",{style:{maxWidth:"70%",padding:"1rem 1.25rem",borderRadius:"user"===e.sender?"1.25rem 1.25rem 0.25rem 1.25rem":"1.25rem 1.25rem 1.25rem 0.25rem",backgroundColor:"user"===e.sender?"var(--primary-base)":"var(--light-gray)",color:"user"===e.sender?"var(--white)":"var(--text-primary)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",wordWrap:"break-word"},className:"jsx-83c21170c761ff26",children:[(0,s.jsx)("div",{style:{fontSize:"1rem",lineHeight:1.5,marginBottom:"0.5rem"},className:"jsx-83c21170c761ff26",children:e.text}),(0,s.jsx)("div",{style:{fontSize:"0.75rem",opacity:.7,textAlign:"right"},className:"jsx-83c21170c761ff26",children:e.timestamp.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),o&&(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"1rem"},className:"jsx-83c21170c761ff26",children:(0,s.jsxs)("div",{style:{padding:"1rem 1.25rem",borderRadius:"1.25rem 1.25rem 1.25rem 0.25rem",backgroundColor:"var(--light-gray)",display:"flex",gap:"0.5rem"},className:"jsx-83c21170c761ff26",children:[(0,s.jsx)("div",{className:"jsx-83c21170c761ff26 typing-dot"}),(0,s.jsx)("div",{className:"jsx-83c21170c761ff26 typing-dot"}),(0,s.jsx)("div",{className:"jsx-83c21170c761ff26 typing-dot"})]})}),(0,s.jsx)("div",{ref:f,className:"jsx-83c21170c761ff26"})]}),(0,s.jsx)("div",{style:{backgroundColor:"var(--white)",borderRadius:"0 0 1rem 1rem",padding:"1.5rem",boxShadow:"0 -2px 12px rgba(0, 0, 0, 0.05)"},className:"jsx-83c21170c761ff26",children:(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end"},className:"jsx-83c21170c761ff26",children:[(0,s.jsx)("input",{ref:x,type:"text",value:t,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"Введите ваше сообщение...",disabled:o,style:{flex:1,padding:"1rem",borderRadius:"0.75rem",border:"2px solid var(--border-default)",fontSize:"1rem",outline:"none",transition:"border-color 0.2s ease",backgroundColor:"var(--light-gray)"},onFocus:e=>{e.target.style.borderColor="var(--primary-base)"},onBlur:e=>{e.target.style.borderColor="var(--border-default)"},className:"jsx-83c21170c761ff26"}),(0,s.jsxs)("button",{onClick:p,disabled:!t.trim()||o,style:{padding:"1rem 2rem",borderRadius:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:!t.trim()||o?.5:1,cursor:!t.trim()||o?"not-allowed":"pointer"},className:"jsx-83c21170c761ff26 btn-primary",children:[(0,s.jsx)("span",{className:"jsx-83c21170c761ff26",children:"Отправить"}),(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"jsx-83c21170c761ff26",children:(0,s.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",className:"jsx-83c21170c761ff26"})})]})]})})]}),(0,s.jsx)(i(),{id:"83c21170c761ff26",children:".typing-dot.jsx-83c21170c761ff26{width:8px;height:8px;border-radius:50%;background-color:var(--primary-base);animation:typing 1.4s infinite ease-in-out}.typing-dot.jsx-83c21170c761ff26:nth-child(2){animation-delay:.2s}.typing-dot.jsx-83c21170c761ff26:nth-child(3){animation-delay:.4s}@keyframes typing{0%,60%,100%{transform:translatey(0);opacity:.7}30%{transform:translatey(-10px);opacity:1}}@media(max-width:768px){.container.jsx-83c21170c761ff26{padding:1rem .5rem!important}}"})]})}}},e=>{e.O(0,[67,441,255,358],()=>e(e.s=835)),_N_E=e.O()}]);